{"version":3,"file":"@unhead-62e64392.js","sources":["../../node_modules/.pnpm/@unhead+vue@1.0.15_vue@3.2.45/node_modules/@unhead/vue/dist/index.mjs","../../node_modules/.pnpm/@unhead+dom@1.0.15/node_modules/@unhead/dom/dist/index.mjs"],"sourcesContent":["import { createHooks } from 'hookable';\nimport { unref, isRef, version, getCurrentInstance, inject, nextTick, ref, watchEffect, watch, onBeforeUnmount } from 'vue';\n\nconst TagsWithInnerContent = [\"script\", \"style\", \"noscript\"];\nconst HasElementTags$1 = [\n  \"base\",\n  \"meta\",\n  \"link\",\n  \"style\",\n  \"script\",\n  \"noscript\"\n];\n\nconst UniqueTags$1 = [\"base\", \"title\", \"titleTemplate\", \"bodyAttrs\", \"htmlAttrs\"];\nfunction tagDedupeKey$1(tag, fn) {\n  const { props, tag: tagName } = tag;\n  if (UniqueTags$1.includes(tagName))\n    return tagName;\n  if (tagName === \"link\" && props.rel === \"canonical\")\n    return \"canonical\";\n  if (props.charset)\n    return \"charset\";\n  const name = [\"id\"];\n  if (tagName === \"meta\")\n    name.push(...[\"name\", \"property\", \"http-equiv\"]);\n  for (const n of name) {\n    if (typeof props[n] !== \"undefined\") {\n      const val = String(props[n]);\n      if (fn && !fn(val))\n        return false;\n      return `${tagName}:${n}:${val}`;\n    }\n  }\n  return false;\n}\n\nconst setAttrs = (ctx, markSideEffect) => {\n  const { tag, $el } = ctx;\n  if (!$el)\n    return;\n  Object.entries(tag.props).forEach(([k, value]) => {\n    value = String(value);\n    const attrSdeKey = `attr:${k}`;\n    if (k === \"class\") {\n      if (!value)\n        return;\n      for (const c of value.split(\" \")) {\n        const classSdeKey = `${attrSdeKey}:${c}`;\n        if (markSideEffect)\n          markSideEffect(ctx, classSdeKey, () => $el.classList.remove(c));\n        if (!$el.classList.contains(c))\n          $el.classList.add(c);\n      }\n      return;\n    }\n    if (markSideEffect && !k.startsWith(\"data-h-\"))\n      markSideEffect(ctx, attrSdeKey, () => $el.removeAttribute(k));\n    if ($el.getAttribute(k) !== value)\n      $el.setAttribute(k, value);\n  });\n  if (TagsWithInnerContent.includes(tag.tag) && $el.innerHTML !== (tag.children || \"\"))\n    $el.innerHTML = tag.children || \"\";\n};\n\nfunction hashCode(s) {\n  let h = 9;\n  for (let i = 0; i < s.length; )\n    h = Math.imul(h ^ s.charCodeAt(i++), 9 ** 9);\n  return ((h ^ h >>> 9) + 65536).toString(16).substring(1, 8).toLowerCase();\n}\n\nasync function renderDOMHead(head, options = {}) {\n  const ctx = { shouldRender: true };\n  await head.hooks.callHook(\"dom:beforeRender\", ctx);\n  if (!ctx.shouldRender)\n    return;\n  const dom = options.document || window.document;\n  const staleSideEffects = head._popSideEffectQueue();\n  head.headEntries().map((entry) => entry._sde).forEach((sde) => {\n    Object.entries(sde).forEach(([key, fn]) => {\n      staleSideEffects[key] = fn;\n    });\n  });\n  const preRenderTag = async (tag) => {\n    const entry = head.headEntries().find((e) => e._i === tag._e);\n    const renderCtx = {\n      renderId: tag._d || hashCode(JSON.stringify({ ...tag, _e: void 0, _p: void 0 })),\n      $el: null,\n      shouldRender: true,\n      tag,\n      entry,\n      staleSideEffects\n    };\n    await head.hooks.callHook(\"dom:beforeRenderTag\", renderCtx);\n    return renderCtx;\n  };\n  const renders = [];\n  const pendingRenders = {\n    body: [],\n    head: []\n  };\n  const markSideEffect = (ctx2, key, fn) => {\n    key = `${ctx2.renderId}:${key}`;\n    if (ctx2.entry)\n      ctx2.entry._sde[key] = fn;\n    delete staleSideEffects[key];\n  };\n  const markEl = (ctx2) => {\n    head._elMap[ctx2.renderId] = ctx2.$el;\n    renders.push(ctx2);\n    markSideEffect(ctx2, \"el\", () => {\n      ctx2.$el?.remove();\n      delete head._elMap[ctx2.renderId];\n    });\n  };\n  for (const t of await head.resolveTags()) {\n    const ctx2 = await preRenderTag(t);\n    if (!ctx2.shouldRender)\n      continue;\n    const { tag } = ctx2;\n    if (tag.tag === \"title\") {\n      dom.title = tag.children || \"\";\n      renders.push(ctx2);\n      continue;\n    }\n    if (tag.tag === \"htmlAttrs\" || tag.tag === \"bodyAttrs\") {\n      ctx2.$el = dom[tag.tag === \"htmlAttrs\" ? \"documentElement\" : \"body\"];\n      setAttrs(ctx2, markSideEffect);\n      renders.push(ctx2);\n      continue;\n    }\n    ctx2.$el = head._elMap[ctx2.renderId];\n    if (!ctx2.$el && tag._hash) {\n      ctx2.$el = dom.querySelector(`${tag.tagPosition?.startsWith(\"body\") ? \"body\" : \"head\"} > ${tag.tag}[data-h-${tag._hash}]`);\n    }\n    if (ctx2.$el) {\n      if (ctx2.tag._d)\n        setAttrs(ctx2);\n      markEl(ctx2);\n      continue;\n    }\n    ctx2.$el = dom.createElement(tag.tag);\n    setAttrs(ctx2);\n    pendingRenders[tag.tagPosition?.startsWith(\"body\") ? \"body\" : \"head\"].push(ctx2);\n  }\n  Object.entries(pendingRenders).forEach(([pos, queue]) => {\n    if (!queue.length)\n      return;\n    for (const $el of [...dom[pos].children].reverse()) {\n      const elTag = $el.tagName.toLowerCase();\n      if (!HasElementTags$1.includes(elTag))\n        continue;\n      const dedupeKey = tagDedupeKey$1({\n        tag: elTag,\n        props: $el.getAttributeNames().reduce((props, name) => ({ ...props, [name]: $el.getAttribute(name) }), {})\n      });\n      const matchIdx = queue.findIndex((ctx2) => ctx2 && (ctx2.tag._d === dedupeKey || $el.isEqualNode(ctx2.$el)));\n      if (matchIdx !== -1) {\n        const ctx2 = queue[matchIdx];\n        ctx2.$el = $el;\n        setAttrs(ctx2);\n        markEl(ctx2);\n        delete queue[matchIdx];\n      }\n    }\n    queue.forEach((ctx2) => {\n      if (!ctx2.$el)\n        return;\n      switch (ctx2.tag.tagPosition) {\n        case \"bodyClose\":\n          dom.body.appendChild(ctx2.$el);\n          break;\n        case \"bodyOpen\":\n          dom.body.insertBefore(ctx2.$el, dom.body.firstChild);\n          break;\n        case \"head\":\n        default:\n          dom.head.appendChild(ctx2.$el);\n          break;\n      }\n      markEl(ctx2);\n    });\n  });\n  for (const ctx2 of renders)\n    await head.hooks.callHook(\"dom:renderTag\", ctx2);\n  Object.values(staleSideEffects).forEach((fn) => fn());\n}\nlet domUpdatePromise = null;\nasync function debouncedRenderDOMHead(head, options = {}) {\n  function doDomUpdate() {\n    domUpdatePromise = null;\n    return renderDOMHead(head, options);\n  }\n  const delayFn = options.delayFn || ((fn) => setTimeout(fn, 10));\n  return domUpdatePromise = domUpdatePromise || new Promise((resolve) => delayFn(() => resolve(doDomUpdate())));\n}\n\nconst index = {\n  __proto__: null,\n  debouncedRenderDOMHead: debouncedRenderDOMHead,\n  get domUpdatePromise () { return domUpdatePromise; },\n  hashCode: hashCode,\n  renderDOMHead: renderDOMHead\n};\n\nconst ValidHeadTags = [\n  \"title\",\n  \"titleTemplate\",\n  \"base\",\n  \"htmlAttrs\",\n  \"bodyAttrs\",\n  \"meta\",\n  \"link\",\n  \"style\",\n  \"script\",\n  \"noscript\"\n];\nconst TagConfigKeys = [\"tagPosition\", \"tagPriority\", \"tagDuplicateStrategy\"];\n\nasync function normaliseTag(tagName, input) {\n  const tag = { tag: tagName, props: {} };\n  if (tagName === \"title\" || tagName === \"titleTemplate\") {\n    tag.children = input instanceof Promise ? await input : input;\n    return tag;\n  }\n  tag.props = await normaliseProps({ ...input });\n  [\"children\", \"innerHtml\", \"innerHTML\"].forEach((key) => {\n    if (typeof tag.props[key] !== \"undefined\") {\n      tag.children = tag.props[key];\n      if (typeof tag.children === \"object\")\n        tag.children = JSON.stringify(tag.children);\n      delete tag.props[key];\n    }\n  });\n  Object.keys(tag.props).filter((k) => TagConfigKeys.includes(k)).forEach((k) => {\n    tag[k] = tag.props[k];\n    delete tag.props[k];\n  });\n  if (typeof tag.props.class === \"object\" && !Array.isArray(tag.props.class)) {\n    tag.props.class = Object.keys(tag.props.class).filter((k) => tag.props.class[k]);\n  }\n  if (Array.isArray(tag.props.class))\n    tag.props.class = tag.props.class.join(\" \");\n  if (tag.props.content && Array.isArray(tag.props.content)) {\n    return tag.props.content.map((v, i) => {\n      const newTag = { ...tag, props: { ...tag.props } };\n      newTag.props.content = v;\n      newTag.key = `${tag.props.name || tag.props.property}:${i}`;\n      return newTag;\n    });\n  }\n  return tag;\n}\nasync function normaliseProps(props) {\n  for (const k of Object.keys(props)) {\n    if (props[k] instanceof Promise) {\n      props[k] = await props[k];\n    }\n    if (String(props[k]) === \"true\") {\n      props[k] = \"\";\n    } else if (String(props[k]) === \"false\") {\n      delete props[k];\n    }\n  }\n  return props;\n}\n\nconst tagWeight = (tag) => {\n  if (typeof tag.tagPriority === \"number\")\n    return tag.tagPriority;\n  switch (tag.tagPriority) {\n    case \"critical\":\n      return 2;\n    case \"high\":\n      return 9;\n    case \"low\":\n      return 12;\n  }\n  switch (tag.tag) {\n    case \"base\":\n      return -1;\n    case \"title\":\n      return 1;\n    case \"meta\":\n      if (tag.props.charset)\n        return -2;\n      if (tag.props[\"http-equiv\"] === \"content-security-policy\")\n        return 0;\n      return 10;\n    default:\n      return 10;\n  }\n};\nconst sortTags = (aTag, bTag) => {\n  return tagWeight(aTag) - tagWeight(bTag);\n};\n\nconst UniqueTags = [\"base\", \"title\", \"titleTemplate\", \"bodyAttrs\", \"htmlAttrs\"];\nfunction tagDedupeKey(tag, fn) {\n  const { props, tag: tagName } = tag;\n  if (UniqueTags.includes(tagName))\n    return tagName;\n  if (tagName === \"link\" && props.rel === \"canonical\")\n    return \"canonical\";\n  if (props.charset)\n    return \"charset\";\n  const name = [\"id\"];\n  if (tagName === \"meta\")\n    name.push(...[\"name\", \"property\", \"http-equiv\"]);\n  for (const n of name) {\n    if (typeof props[n] !== \"undefined\") {\n      const val = String(props[n]);\n      if (fn && !fn(val))\n        return false;\n      return `${tagName}:${n}:${val}`;\n    }\n  }\n  return false;\n}\n\nconst renderTitleTemplate = (template, title) => {\n  if (template == null)\n    return title || null;\n  if (typeof template === \"function\")\n    return template(title);\n  return template.replace(\"%s\", title ?? \"\");\n};\nfunction resolveTitleTemplateFromTags(tags) {\n  let titleTemplateIdx = tags.findIndex((i) => i.tag === \"titleTemplate\");\n  const titleIdx = tags.findIndex((i) => i.tag === \"title\");\n  if (titleIdx !== -1 && titleTemplateIdx !== -1) {\n    const newTitle = renderTitleTemplate(\n      tags[titleTemplateIdx].children,\n      tags[titleIdx].children\n    );\n    if (newTitle !== null) {\n      tags[titleIdx].children = newTitle || tags[titleIdx].children;\n    } else {\n      delete tags[titleIdx];\n    }\n  } else if (titleTemplateIdx !== -1) {\n    const newTitle = renderTitleTemplate(\n      tags[titleTemplateIdx].children\n    );\n    if (newTitle !== null) {\n      tags[titleTemplateIdx].children = newTitle;\n      tags[titleTemplateIdx].tag = \"title\";\n      titleTemplateIdx = -1;\n    }\n  }\n  if (titleTemplateIdx !== -1) {\n    delete tags[titleTemplateIdx];\n  }\n  return tags.filter(Boolean);\n}\n\nconst DedupesTagsPlugin = (options) => {\n  options = options || {};\n  const dedupeKeys = options.dedupeKeys || [\"hid\", \"vmid\", \"key\"];\n  return defineHeadPlugin({\n    hooks: {\n      \"tag:normalise\": function({ tag }) {\n        dedupeKeys.forEach((key) => {\n          if (tag.props[key]) {\n            tag.key = tag.props[key];\n            delete tag.props[key];\n          }\n        });\n        const dedupe = tag.key ? `${tag.tag}:${tag.key}` : tagDedupeKey(tag);\n        if (dedupe)\n          tag._d = dedupe;\n      },\n      \"tags:resolve\": function(ctx) {\n        const deduping = {};\n        ctx.tags.forEach((tag) => {\n          let dedupeKey = tag._d || tag._p;\n          const dupedTag = deduping[dedupeKey];\n          if (dupedTag) {\n            let strategy = tag?.tagDuplicateStrategy;\n            if (!strategy && (tag.tag === \"htmlAttrs\" || tag.tag === \"bodyAttrs\"))\n              strategy = \"merge\";\n            if (strategy === \"merge\") {\n              const oldProps = dupedTag.props;\n              [\"class\", \"style\"].forEach((key) => {\n                if (tag.props[key] && oldProps[key]) {\n                  if (key === \"style\" && !oldProps[key].endsWith(\";\"))\n                    oldProps[key] += \";\";\n                  tag.props[key] = `${oldProps[key]} ${tag.props[key]}`;\n                }\n              });\n              deduping[dedupeKey].props = {\n                ...oldProps,\n                ...tag.props\n              };\n              return;\n            } else if (tag._e === dupedTag._e) {\n              dedupeKey = tag._d = `${dedupeKey}:${tag._p}`;\n            }\n            const propCount = Object.keys(tag.props).length;\n            if ((propCount === 0 || propCount === 1 && typeof tag.props[\"data-h-key\"] !== \"undefined\") && !tag.children) {\n              delete deduping[dedupeKey];\n              return;\n            }\n          }\n          deduping[dedupeKey] = tag;\n        });\n        ctx.tags = Object.values(deduping);\n      }\n    }\n  });\n};\n\nconst SortTagsPlugin = () => {\n  return defineHeadPlugin({\n    hooks: {\n      \"tags:resolve\": (ctx) => {\n        const tagIndexForKey = (key) => ctx.tags.find((tag) => tag._d === key)?._p;\n        for (const tag of ctx.tags) {\n          if (!tag.tagPriority || typeof tag.tagPriority === \"number\")\n            continue;\n          const modifiers = [{ prefix: \"before:\", offset: -1 }, { prefix: \"after:\", offset: 1 }];\n          for (const { prefix, offset } of modifiers) {\n            if (tag.tagPriority.startsWith(prefix)) {\n              const key = tag.tagPriority.replace(prefix, \"\");\n              const index = tagIndexForKey(key);\n              if (typeof index !== \"undefined\")\n                tag._p = index + offset;\n            }\n          }\n        }\n        ctx.tags.sort((a, b) => a._p - b._p).sort(sortTags);\n      }\n    }\n  });\n};\n\nconst TitleTemplatePlugin = () => {\n  return defineHeadPlugin({\n    hooks: {\n      \"tags:resolve\": (ctx) => {\n        ctx.tags = resolveTitleTemplateFromTags(ctx.tags);\n      }\n    }\n  });\n};\n\nconst DeprecatedTagAttrPlugin = () => {\n  return defineHeadPlugin({\n    hooks: {\n      \"tag:normalise\": function({ tag }) {\n        if (typeof tag.props.body !== \"undefined\") {\n          tag.tagPosition = \"bodyClose\";\n          delete tag.props.body;\n        }\n      }\n    }\n  });\n};\n\nconst IsBrowser$1 = typeof window !== \"undefined\";\n\nconst ProvideTagHashPlugin = () => {\n  return defineHeadPlugin({\n    hooks: {\n      \"tag:normalise\": (ctx) => {\n        const { tag, entry } = ctx;\n        const isDynamic = typeof tag.props._dynamic !== \"undefined\";\n        if (!HasElementTags.includes(tag.tag) || !tag.key)\n          return;\n        tag._hash = hashCode(JSON.stringify({ tag: tag.tag, key: tag.key }));\n        if (IsBrowser$1 || getActiveHead()?.resolvedOptions?.document)\n          return;\n        if (entry._m === \"server\" || isDynamic) {\n          tag.props[`data-h-${tag._hash}`] = \"\";\n        }\n      },\n      \"tags:resolve\": (ctx) => {\n        ctx.tags = ctx.tags.map((t) => {\n          delete t.props._dynamic;\n          return t;\n        });\n      }\n    }\n  });\n};\n\nconst PatchDomOnEntryUpdatesPlugin = (options) => {\n  return defineHeadPlugin({\n    hooks: {\n      \"entries:updated\": function(head) {\n        if (typeof options?.document === \"undefined\" && typeof window === \"undefined\")\n          return;\n        let delayFn = options?.delayFn;\n        if (!delayFn && typeof requestAnimationFrame !== \"undefined\")\n          delayFn = requestAnimationFrame;\n        Promise.resolve().then(function () { return index; }).then(({ debouncedRenderDOMHead }) => {\n          debouncedRenderDOMHead(head, { document: options?.document || window.document, delayFn });\n        });\n      }\n    }\n  });\n};\n\nconst EventHandlersPlugin = () => {\n  const stripEventHandlers = (mode, tag) => {\n    const props = {};\n    const eventHandlers = {};\n    Object.entries(tag.props).forEach(([key, value]) => {\n      if (key.startsWith(\"on\") && typeof value === \"function\")\n        eventHandlers[key] = value;\n      else\n        props[key] = value;\n    });\n    let delayedSrc;\n    if (mode === \"dom\" && tag.tag === \"script\" && typeof props.src === \"string\" && typeof eventHandlers.onload !== \"undefined\") {\n      delayedSrc = props.src;\n      delete props.src;\n    }\n    return { props, eventHandlers, delayedSrc };\n  };\n  return defineHeadPlugin({\n    hooks: {\n      \"ssr:render\": function(ctx) {\n        ctx.tags = ctx.tags.map((tag) => {\n          tag.props = stripEventHandlers(\"ssr\", tag).props;\n          return tag;\n        });\n      },\n      \"dom:beforeRenderTag\": function(ctx) {\n        const { props, eventHandlers, delayedSrc } = stripEventHandlers(\"dom\", ctx.tag);\n        if (!Object.keys(eventHandlers).length)\n          return;\n        ctx.tag.props = props;\n        ctx.tag._eventHandlers = eventHandlers;\n        ctx.tag._delayedSrc = delayedSrc;\n      },\n      \"dom:renderTag\": function(ctx) {\n        const $el = ctx.$el;\n        if (!ctx.tag._eventHandlers || !$el)\n          return;\n        const $eventListenerTarget = ctx.tag.tag === \"bodyAttrs\" && typeof window !== \"undefined\" ? window : $el;\n        Object.entries(ctx.tag._eventHandlers).forEach(([k, value]) => {\n          const sdeKey = `${ctx.tag._d || ctx.tag._p}:${k}`;\n          const eventName = k.slice(2).toLowerCase();\n          const eventDedupeKey = `data-h-${eventName}`;\n          delete ctx.staleSideEffects[sdeKey];\n          if ($el.hasAttribute(eventDedupeKey))\n            return;\n          const handler = value;\n          $el.setAttribute(eventDedupeKey, \"\");\n          $eventListenerTarget.addEventListener(eventName, handler);\n          if (ctx.entry) {\n            ctx.entry._sde[sdeKey] = () => {\n              $eventListenerTarget.removeEventListener(eventName, handler);\n              $el.removeAttribute(eventDedupeKey);\n            };\n          }\n        });\n        if (ctx.tag._delayedSrc) {\n          $el.setAttribute(\"src\", ctx.tag._delayedSrc);\n        }\n      }\n    }\n  });\n};\n\nfunction asArray$1(value) {\n  return Array.isArray(value) ? value : [value];\n}\nconst HasElementTags = [\n  \"base\",\n  \"meta\",\n  \"link\",\n  \"style\",\n  \"script\",\n  \"noscript\"\n];\n\nlet activeHead;\nconst setActiveHead = (head) => activeHead = head;\nconst getActiveHead = () => activeHead;\n\nconst TagEntityBits = 10;\n\nasync function normaliseEntryTags(e) {\n  const tagPromises = [];\n  Object.entries(e.resolvedInput || e.input).filter(([k, v]) => typeof v !== \"undefined\" && ValidHeadTags.includes(k)).forEach(([k, value]) => {\n    const v = asArray$1(value);\n    tagPromises.push(...v.map((props) => normaliseTag(k, props)).flat());\n  });\n  return (await Promise.all(tagPromises)).flat().map((t, i) => {\n    t._e = e._i;\n    t._p = (e._i << TagEntityBits) + i;\n    return t;\n  });\n}\n\nconst CorePlugins = () => [\n  DedupesTagsPlugin(),\n  SortTagsPlugin(),\n  TitleTemplatePlugin(),\n  ProvideTagHashPlugin(),\n  EventHandlersPlugin(),\n  DeprecatedTagAttrPlugin()\n];\nconst DOMPlugins = (options = {}) => [\n  PatchDomOnEntryUpdatesPlugin({ document: options?.document, delayFn: options?.domDelayFn })\n];\nfunction createHead$1(options = {}) {\n  const head = createHeadCore({\n    ...options,\n    plugins: [...DOMPlugins(options), ...options?.plugins || []]\n  });\n  setActiveHead(head);\n  return head;\n}\nfunction createHeadCore(options = {}) {\n  let entries = [];\n  let _sde = {};\n  let _eid = 0;\n  const hooks = createHooks();\n  if (options?.hooks)\n    hooks.addHooks(options.hooks);\n  options.plugins = [\n    ...CorePlugins(),\n    ...options?.plugins || []\n  ];\n  options.plugins.forEach((p) => p.hooks && hooks.addHooks(p.hooks));\n  const updated = () => hooks.callHook(\"entries:updated\", head);\n  const head = {\n    resolvedOptions: options,\n    headEntries() {\n      return entries;\n    },\n    get hooks() {\n      return hooks;\n    },\n    use(plugin) {\n      if (plugin.hooks)\n        hooks.addHooks(plugin.hooks);\n    },\n    push(input, options2) {\n      const activeEntry = {\n        _i: _eid++,\n        input,\n        _sde: {}\n      };\n      if (options2?.mode)\n        activeEntry._m = options2?.mode;\n      entries.push(activeEntry);\n      updated();\n      return {\n        dispose() {\n          entries = entries.filter((e) => {\n            if (e._i !== activeEntry._i)\n              return true;\n            _sde = { ..._sde, ...e._sde || {} };\n            e._sde = {};\n            updated();\n            return false;\n          });\n        },\n        patch(input2) {\n          entries = entries.map((e) => {\n            if (e._i === activeEntry._i) {\n              activeEntry.input = e.input = input2;\n              updated();\n            }\n            return e;\n          });\n        }\n      };\n    },\n    async resolveTags() {\n      const resolveCtx = { tags: [], entries: [...entries] };\n      await hooks.callHook(\"entries:resolve\", resolveCtx);\n      for (const entry of resolveCtx.entries) {\n        for (const tag of await normaliseEntryTags(entry)) {\n          const tagCtx = { tag, entry };\n          await hooks.callHook(\"tag:normalise\", tagCtx);\n          resolveCtx.tags.push(tagCtx.tag);\n        }\n      }\n      await hooks.callHook(\"tags:resolve\", resolveCtx);\n      return resolveCtx.tags;\n    },\n    _elMap: {},\n    _popSideEffectQueue() {\n      const sde = { ..._sde };\n      _sde = {};\n      return sde;\n    }\n  };\n  head.hooks.callHook(\"init\", head);\n  return head;\n}\n\nfunction defineHeadPlugin(plugin) {\n  return plugin;\n}\nconst composableNames = [\n  \"useHead\",\n  \"useTagTitle\",\n  \"useTagBase\",\n  \"useTagMeta\",\n  \"useTagMetaFlat\",\n  \"useSeoMeta\",\n  \"useTagLink\",\n  \"useTagScript\",\n  \"useTagStyle\",\n  \"useTagNoscript\",\n  \"useHtmlAttrs\",\n  \"useBodyAttrs\",\n  \"useTitleTemplate\",\n  \"useServerHead\",\n  \"useServerTagTitle\",\n  \"useServerTagBase\",\n  \"useServerTagMeta\",\n  \"useServerTagMetaFlat\",\n  \"useServerTagLink\",\n  \"useServerTagScript\",\n  \"useServerTagStyle\",\n  \"useServerTagNoscript\",\n  \"useServerHtmlAttrs\",\n  \"useServerBodyAttrs\",\n  \"useServerTitleTemplate\"\n];\n\nfunction resolveUnref(r) {\n  return typeof r === \"function\" ? r() : unref(r);\n}\nfunction resolveUnrefHeadInput(ref, lastKey = \"\") {\n  if (ref instanceof Promise)\n    return ref;\n  const root = resolveUnref(ref);\n  if (!ref || !root)\n    return root;\n  if (Array.isArray(root))\n    return root.map((r) => resolveUnrefHeadInput(r, lastKey));\n  if (typeof root === \"object\") {\n    let dynamic = false;\n    const unrefdObj = Object.fromEntries(\n      Object.entries(root).map(([k, v]) => {\n        if (k === \"titleTemplate\" || k.startsWith(\"on\"))\n          return [k, unref(v)];\n        if (typeof v === \"function\" || isRef(v))\n          dynamic = true;\n        return [k, resolveUnrefHeadInput(v, k)];\n      })\n    );\n    if (dynamic && HasElementTags.includes(String(lastKey)))\n      unrefdObj._dynamic = true;\n    return unrefdObj;\n  }\n  return root;\n}\nfunction asArray(value) {\n  return Array.isArray(value) ? value : [value];\n}\n\nconst Vue3 = version.startsWith(\"3\");\nconst IsBrowser = typeof window !== \"undefined\";\n\nconst headSymbol = \"usehead\";\nfunction injectHead() {\n  return getCurrentInstance() && inject(headSymbol) || getActiveHead();\n}\nfunction createHead(options = {}) {\n  const head = createHead$1({\n    ...options,\n    domDelayFn: (fn) => setTimeout(() => nextTick(() => fn()), 10),\n    plugins: [\n      VueReactiveUseHeadPlugin(),\n      ...options?.plugins || []\n    ]\n  });\n  const vuePlugin = {\n    install(app) {\n      if (Vue3) {\n        app.config.globalProperties.$unhead = head;\n        app.provide(headSymbol, head);\n      }\n    }\n  };\n  head.install = vuePlugin.install;\n  return head;\n}\n\nconst VueHeadMixin = {\n  created() {\n    const instance = getCurrentInstance();\n    if (!instance)\n      return;\n    const options = instance.type;\n    if (!options || !(\"head\" in options))\n      return;\n    const source = typeof options.head === \"function\" ? () => options.head.call(instance.proxy) : options.head;\n    useHead(source);\n  }\n};\n\nconst VueReactiveUseHeadPlugin = () => {\n  return defineHeadPlugin({\n    hooks: {\n      \"entries:resolve\": function(ctx) {\n        for (const entry of ctx.entries)\n          entry.resolvedInput = resolveUnrefHeadInput(entry.input);\n      }\n    }\n  });\n};\n\nconst Vue2ProvideUnheadPlugin = function(_Vue, head) {\n  _Vue.mixin({\n    beforeCreate() {\n      const options = this.$options;\n      const origProvide = options.provide;\n      options.provide = function() {\n        let origProvideResult;\n        if (typeof origProvide === \"function\")\n          origProvideResult = origProvide.call(this);\n        else\n          origProvideResult = origProvide || {};\n        return {\n          ...origProvideResult,\n          [headSymbol]: head\n        };\n      };\n    }\n  });\n};\n\nfunction unpackToArray(input, options) {\n  const unpacked = [];\n  const kFn = options.resolveKeyData || ((ctx) => ctx.key);\n  const vFn = options.resolveValueData || ((ctx) => ctx.value);\n  for (const [k, v] of Object.entries(input)) {\n    unpacked.push(...(Array.isArray(v) ? v : [v]).map((i) => {\n      const ctx = { key: k, value: i };\n      const val = vFn(ctx);\n      if (typeof val === \"object\")\n        return unpackToArray(val, options);\n      if (Array.isArray(val))\n        return val;\n      return {\n        [typeof options.key === \"function\" ? options.key(ctx) : options.key]: kFn(ctx),\n        [typeof options.value === \"function\" ? options.value(ctx) : options.value]: val\n      };\n    }).flat());\n  }\n  return unpacked;\n}\n\nfunction unpackToString(value, options) {\n  return Object.entries(value).map(([key, value2]) => {\n    if (typeof value2 === \"object\")\n      value2 = unpackToString(value2, options);\n    if (options.resolve) {\n      const resolved = options.resolve({ key, value: value2 });\n      if (resolved)\n        return resolved;\n    }\n    if (typeof value2 === \"number\")\n      value2 = value2.toString();\n    if (typeof value2 === \"string\" && options.wrapValue) {\n      value2 = value2.replace(new RegExp(options.wrapValue, \"g\"), `\\\\${options.wrapValue}`);\n      value2 = `${options.wrapValue}${value2}${options.wrapValue}`;\n    }\n    return `${key}${options.keyValueSeparator || \"\"}${value2}`;\n  }).join(options.entrySeparator || \"\");\n}\n\nconst MetaPackingSchema = {\n  robots: {\n    unpack: {\n      keyValueSeparator: \":\"\n    }\n  },\n  contentSecurityPolicy: {\n    unpack: {\n      keyValueSeparator: \" \",\n      entrySeparator: \"; \"\n    },\n    metaKey: \"http-equiv\"\n  },\n  fbAppId: {\n    keyValue: \"fb:app_id\",\n    metaKey: \"property\"\n  },\n  msapplicationTileImage: {\n    keyValue: \"msapplication-TileImage\"\n  },\n  msapplicationTileColor: {\n    keyValue: \"msapplication-TileColor\"\n  },\n  msapplicationConfig: {\n    keyValue: \"msapplication-Config\"\n  },\n  charset: {\n    metaKey: \"charset\"\n  },\n  contentType: {\n    metaKey: \"http-equiv\"\n  },\n  defaultStyle: {\n    metaKey: \"http-equiv\"\n  },\n  xUaCompatible: {\n    metaKey: \"http-equiv\"\n  },\n  refresh: {\n    metaKey: \"http-equiv\"\n  }\n};\nfunction resolveMetaKeyType(key) {\n  return PropertyPrefixKeys.test(key) ? \"property\" : MetaPackingSchema[key]?.metaKey || \"name\";\n}\n\nfunction unpackMeta(input) {\n  const meta = unpackToArray(input, {\n    key({ key }) {\n      return resolveMetaKeyType(key);\n    },\n    value({ key }) {\n      return key === \"charset\" ? \"charset\" : \"content\";\n    },\n    resolveKeyData({ key }) {\n      return MetaPackingSchema[key]?.keyValue || fixKeyCase(key);\n    },\n    resolveValueData({ value, key }) {\n      if (value === null)\n        return \"_null\";\n      if (typeof value === \"object\") {\n        const definition = MetaPackingSchema[key];\n        if (key === \"refresh\")\n          return `${value.seconds};url=${value.url}`;\n        return unpackToString(\n          changeKeyCasingDeep(value),\n          {\n            entrySeparator: \", \",\n            keyValueSeparator: \"=\",\n            resolve({ value: value2, key: key2 }) {\n              if (value2 === null)\n                return \"\";\n              if (typeof value2 === \"boolean\")\n                return `${key2}`;\n            },\n            ...definition?.unpack\n          }\n        );\n      }\n      return typeof value === \"number\" ? value.toString() : value;\n    }\n  });\n  return meta.filter((v) => typeof v.content === \"undefined\" || v.content !== \"_null\");\n}\n\nconst PropertyPrefixKeys = /^(og|twitter|fb)/;\nfunction fixKeyCase(key) {\n  key = key.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n  if (PropertyPrefixKeys.test(key)) {\n    key = key.replace(\"secure-url\", \"secure_url\").replace(/-/g, \":\");\n  }\n  return key;\n}\nfunction changeKeyCasingDeep(input) {\n  if (Array.isArray(input)) {\n    return input.map((entry) => changeKeyCasingDeep(entry));\n  }\n  if (typeof input !== \"object\" || Array.isArray(input))\n    return input;\n  const output = {};\n  for (const [key, value] of Object.entries(input))\n    output[fixKeyCase(key)] = changeKeyCasingDeep(value);\n  return output;\n}\n\nfunction clientUseHead(input, options = {}) {\n  const head = injectHead();\n  const resolvedInput = ref({});\n  watchEffect(() => {\n    resolvedInput.value = resolveUnrefHeadInput(input);\n  });\n  const entry = head.push(resolvedInput.value, options);\n  watch(resolvedInput, (e) => entry.patch(e));\n  const vm = getCurrentInstance();\n  if (vm) {\n    onBeforeUnmount(() => {\n      entry.dispose();\n    });\n  }\n  return entry;\n}\n\nfunction serverUseHead(input, options = {}) {\n  const head = injectHead();\n  return head.push(input, options);\n}\n\nfunction useServerHead(input, options = {}) {\n  return useHead(input, { ...options, mode: \"server\" });\n}\nconst useServerTagTitle = (title) => useServerHead({ title });\nconst useServerTitleTemplate = (titleTemplate) => useServerHead({ titleTemplate });\nconst useServerTagMeta = (meta) => useServerHead({ meta: asArray(meta) });\nconst useServerTagMetaFlat = (meta) => {\n  const input = ref({});\n  watchEffect(() => {\n    input.value = unpackMeta(resolveUnrefHeadInput(meta));\n  });\n  return useServerHead({ meta: input });\n};\nconst useServerTagLink = (link) => useServerHead({ link: asArray(link) });\nconst useServerTagScript = (script) => useServerHead({ script: asArray(script) });\nconst useServerTagStyle = (style) => useServerHead({ style: asArray(style) });\nconst useServerTagNoscript = (noscript) => useServerHead({ noscript: asArray(noscript) });\nconst useServerTagBase = (base) => useServerHead({ base });\nconst useServerHtmlAttrs = (attrs) => useServerHead({ htmlAttrs: attrs });\nconst useServerBodyAttrs = (attrs) => useHead({ bodyAttrs: attrs });\n\nfunction useHead(input, options = {}) {\n  const head = injectHead();\n  if (head) {\n    const isBrowser = IsBrowser || !!head.resolvedOptions?.document;\n    if (options.mode === \"server\" && isBrowser || options.mode === \"client\" && !isBrowser)\n      return;\n    return isBrowser ? clientUseHead(input, options) : serverUseHead(input, options);\n  }\n}\nconst useTagTitle = (title) => useHead({ title });\nconst useTitleTemplate = (titleTemplate) => useHead({ titleTemplate });\nconst useTagMeta = (meta) => useHead({ meta: asArray(meta) });\nconst useTagMetaFlat = (meta) => {\n  const input = ref({});\n  watchEffect(() => {\n    input.value = unpackMeta(resolveUnrefHeadInput(meta));\n  });\n  return useHead({ meta: input });\n};\nconst useSeoMeta = useTagMetaFlat;\nconst useTagLink = (link) => useHead({ link: asArray(link) });\nconst useTagScript = (script) => useHead({ script: asArray(script) });\nconst useTagStyle = (style) => useHead({ style: asArray(style) });\nconst useTagNoscript = (noscript) => useHead({ noscript: asArray(noscript) });\nconst useTagBase = (base) => useHead({ base });\nconst useHtmlAttrs = (attrs) => useHead({ htmlAttrs: attrs });\nconst useBodyAttrs = (attrs) => useHead({ bodyAttrs: attrs });\n\nconst coreComposableNames = [\n  \"injectHead\"\n];\nconst unheadVueComposablesImports = {\n  \"@unhead/vue\": [...coreComposableNames, ...composableNames]\n};\n\nexport { Vue2ProvideUnheadPlugin, VueHeadMixin, VueReactiveUseHeadPlugin, asArray, createHead, createHeadCore, headSymbol, injectHead, resolveUnrefHeadInput, unheadVueComposablesImports, useBodyAttrs, useHead, useHtmlAttrs, useSeoMeta, useServerBodyAttrs, useServerHead, useServerHtmlAttrs, useServerTagBase, useServerTagLink, useServerTagMeta, useServerTagMetaFlat, useServerTagNoscript, useServerTagScript, useServerTagStyle, useServerTagTitle, useServerTitleTemplate, useTagBase, useTagLink, useTagMeta, useTagMetaFlat, useTagNoscript, useTagScript, useTagStyle, useTagTitle, useTitleTemplate };\n","const TagsWithInnerContent = [\"script\", \"style\", \"noscript\"];\nconst HasElementTags = [\n  \"base\",\n  \"meta\",\n  \"link\",\n  \"style\",\n  \"script\",\n  \"noscript\"\n];\n\nconst UniqueTags = [\"base\", \"title\", \"titleTemplate\", \"bodyAttrs\", \"htmlAttrs\"];\nfunction tagDedupeKey(tag, fn) {\n  const { props, tag: tagName } = tag;\n  if (UniqueTags.includes(tagName))\n    return tagName;\n  if (tagName === \"link\" && props.rel === \"canonical\")\n    return \"canonical\";\n  if (props.charset)\n    return \"charset\";\n  const name = [\"id\"];\n  if (tagName === \"meta\")\n    name.push(...[\"name\", \"property\", \"http-equiv\"]);\n  for (const n of name) {\n    if (typeof props[n] !== \"undefined\") {\n      const val = String(props[n]);\n      if (fn && !fn(val))\n        return false;\n      return `${tagName}:${n}:${val}`;\n    }\n  }\n  return false;\n}\n\nconst setAttrs = (ctx, markSideEffect) => {\n  const { tag, $el } = ctx;\n  if (!$el)\n    return;\n  Object.entries(tag.props).forEach(([k, value]) => {\n    value = String(value);\n    const attrSdeKey = `attr:${k}`;\n    if (k === \"class\") {\n      if (!value)\n        return;\n      for (const c of value.split(\" \")) {\n        const classSdeKey = `${attrSdeKey}:${c}`;\n        if (markSideEffect)\n          markSideEffect(ctx, classSdeKey, () => $el.classList.remove(c));\n        if (!$el.classList.contains(c))\n          $el.classList.add(c);\n      }\n      return;\n    }\n    if (markSideEffect && !k.startsWith(\"data-h-\"))\n      markSideEffect(ctx, attrSdeKey, () => $el.removeAttribute(k));\n    if ($el.getAttribute(k) !== value)\n      $el.setAttribute(k, value);\n  });\n  if (TagsWithInnerContent.includes(tag.tag) && $el.innerHTML !== (tag.children || \"\"))\n    $el.innerHTML = tag.children || \"\";\n};\n\nfunction hashCode(s) {\n  let h = 9;\n  for (let i = 0; i < s.length; )\n    h = Math.imul(h ^ s.charCodeAt(i++), 9 ** 9);\n  return ((h ^ h >>> 9) + 65536).toString(16).substring(1, 8).toLowerCase();\n}\n\nasync function renderDOMHead(head, options = {}) {\n  const ctx = { shouldRender: true };\n  await head.hooks.callHook(\"dom:beforeRender\", ctx);\n  if (!ctx.shouldRender)\n    return;\n  const dom = options.document || window.document;\n  const staleSideEffects = head._popSideEffectQueue();\n  head.headEntries().map((entry) => entry._sde).forEach((sde) => {\n    Object.entries(sde).forEach(([key, fn]) => {\n      staleSideEffects[key] = fn;\n    });\n  });\n  const preRenderTag = async (tag) => {\n    const entry = head.headEntries().find((e) => e._i === tag._e);\n    const renderCtx = {\n      renderId: tag._d || hashCode(JSON.stringify({ ...tag, _e: void 0, _p: void 0 })),\n      $el: null,\n      shouldRender: true,\n      tag,\n      entry,\n      staleSideEffects\n    };\n    await head.hooks.callHook(\"dom:beforeRenderTag\", renderCtx);\n    return renderCtx;\n  };\n  const renders = [];\n  const pendingRenders = {\n    body: [],\n    head: []\n  };\n  const markSideEffect = (ctx2, key, fn) => {\n    key = `${ctx2.renderId}:${key}`;\n    if (ctx2.entry)\n      ctx2.entry._sde[key] = fn;\n    delete staleSideEffects[key];\n  };\n  const markEl = (ctx2) => {\n    head._elMap[ctx2.renderId] = ctx2.$el;\n    renders.push(ctx2);\n    markSideEffect(ctx2, \"el\", () => {\n      ctx2.$el?.remove();\n      delete head._elMap[ctx2.renderId];\n    });\n  };\n  for (const t of await head.resolveTags()) {\n    const ctx2 = await preRenderTag(t);\n    if (!ctx2.shouldRender)\n      continue;\n    const { tag } = ctx2;\n    if (tag.tag === \"title\") {\n      dom.title = tag.children || \"\";\n      renders.push(ctx2);\n      continue;\n    }\n    if (tag.tag === \"htmlAttrs\" || tag.tag === \"bodyAttrs\") {\n      ctx2.$el = dom[tag.tag === \"htmlAttrs\" ? \"documentElement\" : \"body\"];\n      setAttrs(ctx2, markSideEffect);\n      renders.push(ctx2);\n      continue;\n    }\n    ctx2.$el = head._elMap[ctx2.renderId];\n    if (!ctx2.$el && tag._hash) {\n      ctx2.$el = dom.querySelector(`${tag.tagPosition?.startsWith(\"body\") ? \"body\" : \"head\"} > ${tag.tag}[data-h-${tag._hash}]`);\n    }\n    if (ctx2.$el) {\n      if (ctx2.tag._d)\n        setAttrs(ctx2);\n      markEl(ctx2);\n      continue;\n    }\n    ctx2.$el = dom.createElement(tag.tag);\n    setAttrs(ctx2);\n    pendingRenders[tag.tagPosition?.startsWith(\"body\") ? \"body\" : \"head\"].push(ctx2);\n  }\n  Object.entries(pendingRenders).forEach(([pos, queue]) => {\n    if (!queue.length)\n      return;\n    for (const $el of [...dom[pos].children].reverse()) {\n      const elTag = $el.tagName.toLowerCase();\n      if (!HasElementTags.includes(elTag))\n        continue;\n      const dedupeKey = tagDedupeKey({\n        tag: elTag,\n        props: $el.getAttributeNames().reduce((props, name) => ({ ...props, [name]: $el.getAttribute(name) }), {})\n      });\n      const matchIdx = queue.findIndex((ctx2) => ctx2 && (ctx2.tag._d === dedupeKey || $el.isEqualNode(ctx2.$el)));\n      if (matchIdx !== -1) {\n        const ctx2 = queue[matchIdx];\n        ctx2.$el = $el;\n        setAttrs(ctx2);\n        markEl(ctx2);\n        delete queue[matchIdx];\n      }\n    }\n    queue.forEach((ctx2) => {\n      if (!ctx2.$el)\n        return;\n      switch (ctx2.tag.tagPosition) {\n        case \"bodyClose\":\n          dom.body.appendChild(ctx2.$el);\n          break;\n        case \"bodyOpen\":\n          dom.body.insertBefore(ctx2.$el, dom.body.firstChild);\n          break;\n        case \"head\":\n        default:\n          dom.head.appendChild(ctx2.$el);\n          break;\n      }\n      markEl(ctx2);\n    });\n  });\n  for (const ctx2 of renders)\n    await head.hooks.callHook(\"dom:renderTag\", ctx2);\n  Object.values(staleSideEffects).forEach((fn) => fn());\n}\nlet domUpdatePromise = null;\nasync function debouncedRenderDOMHead(head, options = {}) {\n  function doDomUpdate() {\n    domUpdatePromise = null;\n    return renderDOMHead(head, options);\n  }\n  const delayFn = options.delayFn || ((fn) => setTimeout(fn, 10));\n  return domUpdatePromise = domUpdatePromise || new Promise((resolve) => delayFn(() => resolve(doDomUpdate())));\n}\n\nexport { debouncedRenderDOMHead, domUpdatePromise, hashCode, renderDOMHead };\n"],"names":["TagsWithInnerContent","HasElementTags$1","UniqueTags$1","tagDedupeKey$1","tag","fn","props","tagName","name","n","val","setAttrs","ctx","markSideEffect","$el","k","value","attrSdeKey","c","classSdeKey","hashCode","s","h","i","renderDOMHead","head","options","dom","staleSideEffects","entry","sde","key","preRenderTag","e","renderCtx","renders","pendingRenders","ctx2","markEl","t","pos","queue","elTag","dedupeKey","matchIdx","domUpdatePromise","debouncedRenderDOMHead","doDomUpdate","delayFn","resolve","index","ValidHeadTags","TagConfigKeys","normaliseTag","input","normaliseProps","v","newTag","tagWeight","sortTags","aTag","bTag","UniqueTags","tagDedupeKey","renderTitleTemplate","template","title","resolveTitleTemplateFromTags","tags","titleTemplateIdx","titleIdx","newTitle","DedupesTagsPlugin","dedupeKeys","dedupe","deduping","dupedTag","strategy","oldProps","propCount","SortTagsPlugin","tagIndexForKey","modifiers","prefix","offset","a","b","TitleTemplatePlugin","DeprecatedTagAttrPlugin","IsBrowser$1","ProvideTagHashPlugin","isDynamic","HasElementTags","getActiveHead","PatchDomOnEntryUpdatesPlugin","EventHandlersPlugin","stripEventHandlers","mode","eventHandlers","delayedSrc","$eventListenerTarget","sdeKey","eventName","eventDedupeKey","handler","asArray$1","activeHead","setActiveHead","TagEntityBits","normaliseEntryTags","tagPromises","CorePlugins","DOMPlugins","createHead$1","createHeadCore","entries","_sde","_eid","hooks","createHooks","p","updated","plugin","options2","activeEntry","input2","resolveCtx","tagCtx","resolveUnref","r","unref","resolveUnrefHeadInput","ref","lastKey","root","dynamic","unrefdObj","isRef","Vue3","version","IsBrowser","headSymbol","injectHead","getCurrentInstance","inject","createHead","nextTick","VueReactiveUseHeadPlugin","vuePlugin","app","Vue2ProvideUnheadPlugin","_Vue","origProvide","origProvideResult","clientUseHead","resolvedInput","watchEffect","watch","onBeforeUnmount","serverUseHead","useHead","isBrowser"],"mappings":"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"}